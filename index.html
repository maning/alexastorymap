<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Alexa's Story of Jesus</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.6/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.6/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>

<style>
article {
  position:absolute;
  top:0;
  right:0;
  bottom:0px;
  left:0;
  overflow:auto;
  }
.quiet {
  color:rgba(0,0,0,0.5);
  }
.scroll {
  display:block;
  text-align:center;
  }
.sections {
  background:rgba(255,255,255,0.5);
  width:40%;
  }
section {
  padding:20px;
  color:rgba(0,0,0,0.5);
  -webkit-transition:background 500ms, color 500ms;
          transition:background 500ms, color 500ms;
  }
section.active {
  background:#fff;
  color:#404040;
  }
</style>
<div id='map'></div>

<article id='narrative'>
  <div class='sections prose'>
    <section id='cover' class='cover active'>
      <h2>The Stories of Jesus</h2>
      <p>by Alexa Antoinette Sambale</p>
<img width="100%" src=https://farm6.staticflickr.com/5612/15776718791_4b1a6be41f_n.jpg alt="H"/>
      <small class='scroll quiet'>Scroll &#x25BE;</small>
    </section>
    <section id='palmsunday'>
      <h3>Donkey for a king</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7475/15847228437_6a740e9cb8_n.jpg alt="H"/>
      <p>One morning/afternoon Jesus said to his disciples that they will go to Jerusalem.
         Then, he asked his disciples he will need a donkey to travel to the city.
         His disciples asked the master of the donkey that their teacher need it.
         Jesus rode the dongkey towards Jerusalem. When they were near the city entrance, 
         the people waved palm leaves and laid down their robes to welcome Jesus.
         His enemies were mad. </p>
    </section>
    <section id='bethany'>
      <h3>Lazarus</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7521/15780181922_e12c1dab58_n.jpg alt="H"/>
      <p>One day, a man came running towards Jesus saying his good friend Lazarus (brother of Mary and Martha) 
         was very very sick. Jesus immediately went to Lazarus' house but when he arrived, 
         they said that Lazarus was already dead. Jesus came to Martha and said roll the stone of Lazarus' tomb. 
         Then Lazarus came out alive.</p>
    </section>
    <section id='jacobswell'>
      <h3>With the lady at the well</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7504/15776735911_3e8b259681_n.jpg alt="H"/>
      <p>Lorem.</p>
    </section>
    <section id='fishersofmen'>
      <h3>Fishers of men</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7532/16031028561_662d9ae7a1_n.jpg alt="H"/>
      <p>Lorem.</p>
    </section>
    <section id='jericho'>
      <h3>The blind man can see</h3>
      <img width="100%" src=https://farm6.staticflickr.com/5603/15593447007_c1552437ac_n.jpg alt="H"/>
      <p>Jesus was walking with his disciples. While they were walking Jesus was teaching. 
         He saw a blind man was begging for food and money. Some of His disciples ignored the man. 
         Then Peter saw the man then he took him to Jesus. Jesus picked a handful of mud which he put 
         on the blind man's eyes. He asked the man to wash the pile of mud on his eyes on the river. 
         When the man washed his eyes, he shouted: "I CAN SEE! I CAN SEE!!!"
         The disciples said that Jesus had done another miracle.
</p>
    </section>
    <section id='tomb'>
      <h3>The third day</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7465/15592767409_24dd201446_n.jpg alt="H"/>
      <p>Lorem.</p>
    </section>
    <section id='ghost'>
      <h3>A ghost!</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7582/15845673750_98894d729d_n.jpg alt="H"/>
      <p>The disciples of Jesus were saling while Jesus was praying.
	Suddenly, the winds blew very hard creating big waves.
	Jesus stepped out of the boat and walked on water.

	His disciples saw him and they thought they saw a ghost!
	When Peter saw Jesus and said; "Lord, if it is really you, can I walk with you?"
	Jesus said; "Come walk with me, it is safe."

	Then Peter step out of the the boat and started to walk towards Jesus.
	While Peter was walking on water, the other disciples shouted that there is bih-g wave coming.
	He looked at the wave and was frightened.  Suddenly he began sinking and shouted for help.
      Jesus said to him; "Peter, why is your faith too small?"</p>
    </section>
    <section id='mother'>
      <h3>With mother</h3>
      <img width="100%" src=https://farm8.staticflickr.com/7571/15845723410_d4ea6c1539_n.jpg alt="H"/>
      <p>Lorem.</p>
    <section id='loaves'>
      <h3>Multiplication of loaves</h3>
<img width="100%" src=https://farm8.staticflickr.com/7465/15410706954_28a85440e2_n.jpg alt="H"/>
      <p>Jesus was followed by a large crowd when they saw him healing the sick.
         He asked his disciples were they can buy enough food for the people.
         Andrew came and said this boy have 5 loaves of bread and 2 fishes. 
         Philip shouted "THAT IS NOT ENOUGH!"
         Jesus took the loaves of bread and fishes. He gave thanks. Then, he broke it and
         asked his disciples to distribute them to the people. Once every one is full, 
         he asked them to gather the leftovers so nothing will be wasted. They collected 12 wicker
         baskets filled with bread and fish. They were very surprised!</p>

      <small class='colophon'>
        Stories and <a href='https://www.flickr.com/photos/esambale/sets/72157646938248864/'>sketches</a> 
        by <a href='https://www.___'>Alexa</a>, cartography by  <a href='http://mapbox.com'>MapBox</a>, 
        locations from Wikipedia, source at <a href='https://github.com/maning/alexastorymap'>GitHub</a>. 
      </small>
    </section>
  </div>
</article>

<script>
L.mapbox.accessToken = 'pk.eyJ1Ijoic2FtYW4iLCJhIjoiS1ptdnd0VSJ9.19qza-F_vXkgpnh80oZJww';
// In this case, we just hardcode data into the file. This could be dynamic.
// The important part about this data is that the 'id' property matches
// the HTML above - that's how we figure out how to link up the
// map and the data.
// axxis order is x.y or lon,lat
var places = { type: 'FeatureCollection', features: [
{ geometry: { type: "Point", coordinates: [35.2598, 32.7040] },
  properties: { id: "cover", zoom: 8 }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.2247239, 31.7774287] },
  properties: { id: "palmsunday" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.2613, 31.7714] },
  properties: { id: "bethany" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.2778, 32.2119] },
  properties: { id: "jacobswell" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.5949, 32.8878] },
  properties: { id: "fishersofmen" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.631, 32.9100] },
  properties: { id: "jericho" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.2300, 31.7839] },
  properties: { id: "tomb" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.5979, 32.8848] },
  properties: { id: "ghost" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.2300, 31.7839] },
  properties: { id: "mother" }, type: 'Feature' },
{ geometry: { type: "Point", coordinates: [35.548611, 32.873333] },
  properties: { id: "loaves" }, type: 'Feature' }
]};

var map = L.mapbox.map('map', 'saman.ed44282c', {
    zoomControl: false
});

var placesLayer = L.mapbox.featureLayer(places)
    .addTo(map);

// Ahead of time, select the elements we'll need -
// the narrative container and the individual sections
var narrative = document.getElementById('narrative'),
    sections = narrative.getElementsByTagName('section'),
    currentId = '';

setId('cover');

function setId(newId) {
    // If the ID hasn't actually changed, don't do anything
    if (newId === currentId) return;
    // Otherwise, iterate through layers, setting the current
    // marker to a different color and zooming to it.
    placesLayer.eachLayer(function(layer) {
        if (layer.feature.properties.id === newId) {
            map.setView(layer.getLatLng(), layer.feature.properties.zoom || 14);
            layer.setIcon(L.mapbox.marker.icon({
                'marker-color': '#a8f'
            }));
        } else {
            layer.setIcon(L.mapbox.marker.icon({
                'marker-color': '#404040'
            }));
        }
    });
    // highlight the current section
    for (var i = 0; i < sections.length; i++) {
        sections[i].className = sections[i].id === newId ? 'active' : '';
    }
    // And then set the new id as the current one,
    // so that we know to do nothing at the beginning
    // of this function if it hasn't changed between calls
    currentId = newId;
}

// If you were to do this for real, you would want to use
// something like underscore's _.debounce function to prevent this
// call from firing constantly.
narrative.onscroll = function(e) {
    var narrativeHeight = narrative.offsetHeight;
    var newId = currentId;
    // Find the section that's currently scrolled-to.
    // We iterate backwards here so that we find the topmost one.
    for (var i = sections.length - 1; i >= 0; i--) {
        var rect = sections[i].getBoundingClientRect();
        if (rect.top >= 0 && rect.top <= narrativeHeight) {
            newId = sections[i].id;
        }
    };
    setId(newId);
};
</script>

</body>
</html>

